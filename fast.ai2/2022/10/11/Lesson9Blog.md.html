<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Fast.ai Lessons 9 Roundup | RvCode</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Fast.ai Lessons 9 Roundup" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="My personal website." />
<meta property="og:description" content="My personal website." />
<link rel="canonical" href="https://exiomius.github.io/Blogs/fast.ai2/2022/10/11/Lesson9Blog.md.html" />
<meta property="og:url" content="https://exiomius.github.io/Blogs/fast.ai2/2022/10/11/Lesson9Blog.md.html" />
<meta property="og:site_name" content="RvCode" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-10-11T00:00:00-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Fast.ai Lessons 9 Roundup" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-10-11T00:00:00-05:00","datePublished":"2022-10-11T00:00:00-05:00","description":"My personal website.","headline":"Fast.ai Lessons 9 Roundup","mainEntityOfPage":{"@type":"WebPage","@id":"https://exiomius.github.io/Blogs/fast.ai2/2022/10/11/Lesson9Blog.md.html"},"url":"https://exiomius.github.io/Blogs/fast.ai2/2022/10/11/Lesson9Blog.md.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/Blogs/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://exiomius.github.io/Blogs/feed.xml" title="RvCode" /><link rel="shortcut icon" type="image/x-icon" href="/Blogs/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/Blogs/">RvCode</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/Blogs/about/">About Me</a><a class="page-link" href="/Blogs/search/">Search</a><a class="page-link" href="/Blogs/categories/">Projects</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Fast.ai Lessons 9 Roundup</h1><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-10-11T00:00:00-05:00" itemprop="datePublished">
        Oct 11, 2022
      </time>
       â€¢ <span class="read-time" title="Estimated read time">
    
    
      5 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/Blogs/categories/#Fast.ai2">Fast.ai2</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-justify-center">
          <div class="px-2">

    <a href="https://github.com/exiomius/Blogs/tree/master/_notebooks/2022-10-11-Lesson9Blog.md.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/Blogs/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/exiomius/Blogs/master?filepath=_notebooks%2F2022-10-11-Lesson9Blog.md.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/Blogs/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/exiomius/Blogs/blob/master/_notebooks/2022-10-11-Lesson9Blog.md.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/Blogs/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
          <div class="px-2">
  <a href="https://deepnote.com/launch?url=https%3A%2F%2Fgithub.com%2Fexiomius%2FBlogs%2Fblob%2Fmaster%2F_notebooks%2F2022-10-11-Lesson9Blog.md.ipynb" target="_blank">
      <img class="notebook-badge-image" src="/Blogs/assets/badges/deepnote.svg" alt="Launch in Deepnote"/>
  </a>
</div>

        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2022-10-11-Lesson9Blog.md.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Lesson-Overview">Lesson Overview<a class="anchor-link" href="#Lesson-Overview"> </a></h1><p>(this lesson is in progress)
Runthrough stable diffusion, then detail behind how it works. There will be some handwaving for a few lessons, because it will take multiple lessons to learn it all from scratch. The point is, we want to build intuition first and see the full picture then narrow into the details as needed.
Jeremy said he expects people to spend on average, 10 hours a lesson.</p>
<ul>
<li>This lesson is 3 lessons. This general video, a deeper code dive called lesson 1A, and another for the maths.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="The-topics-covered,-briefly">The topics covered, briefly<a class="anchor-link" href="#The-topics-covered,-briefly"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Lecture-Notes">Lecture Notes<a class="anchor-link" href="#Lecture-Notes"> </a></h1><ul>
<li>GPU needs have increased for this course. Google collab pricing has increased. Maybe use my laptop GPU or the uni one. The four options: Colab, Paperspace Gradient, Lambda Labs, Jarvis Labs. Lambda GPU offer:$1.10/hour. Lambda is cheaper than everything else but it nor collab allow you to pause. This can change again too. Funnily enough, collab is skyrocking in price because everyone is using it for stable diffusion. </li>
<li>Training GPUs need 16/24 gb. My laptop is only 12gb, and it's probably not simple to optimise it for ML. I might be able to do everything that isn't training on my PC.</li>
<li>Probably should join/create a study group to enjoy the course more.</li>
<li>This course covers details you need to know to be a researcher or custom setup for industry. </li>
<li>Stable diffusion is moving so quickly, the details change. Literally in the last 24hrs, 2 important new papers came out. The number of steps has gone down from from 250 from 1000! And something else changed to make it 10x-20x faster! I wonder if this is a result directly from SD's open source nature. The research community may well be able to improve SD much faster then say OpenAi can improve DALL-E.</li>
<li>But after this first lesson, we go into the foundations which won't change, so the research update details won't be hard to understand.</li>
<li>We can fine-tune SD using dreambooth, to put any object or person into an image! strmr.com is a service to do so!</li>
<li>Diffusion-nbs notebook and repo. It contains many things to play with and then understand what's possible. It's worth testing it. There's notebooks with tons of parameters we don't get understand yet. I think this is the philosophy that, to understand a black box we should first get intuition for it's inputs and outputs, then kneed into the details. </li>
<li>It's not actually easy to know what prompts to give SD. The best way to learn is to look at other people's prompts and outputs lexica.art gives plenty examples.</li>
<li>First start by cloning Stable Diffusion notebook.</li>
<li>Diffusers is the HuggingFace module for this. HuggingFace has had really good packages for a while now.</li>
<li>We use the SD pipeline. A pipeline is similar to a fast.ai learner. It does many things automatically. We can save pipelines like we save learners. We can also save pipelines and upload them into HuggingFace's cloud server. Like this, we can browse and download pipeline's from HuggingFace, and also upload our own and share them. </li>
<li>If we use paperspace or lambda, the pipeline we downloaded will be saved, but if we use collab then no.</li>
<li>If we use the same pipeline with the same random seed, we get the same result. </li>
<li>Generally, diffusion works as follows: we start with random noise, and each step we get slightly less noisy and towards the result we want, through many steps, e.g. 51. Although after yesterday it's now 3-4...</li>
<li>Why don't we just do it in one step? Our models aren't smart enough, but considering it's not 3-4 steps from 1000, maybe they will be.</li>
<li>The exact same prompt, four times, we pass them into the pipeline. The pipeline has a variable, guidance_scale: 'to what degree should we focus on the caption versus just creating the image'.</li>
<li>Too low guidance won't make images of the prompt, too high could be strange depending on the implementation of SD.</li>
<li>It works by making an image without g, then image with g, and find the average of it. </li>
<li>Negative prompts are similar. Make two images, and subtract one from another. Say we want to remove blue from the image. Subtract a prompt blue from it.</li>
<li>Passing images into SD instead of prompts: We use image to image pipelines. Instead of starting diffusion with random noise from scratch, it starts with a noisy version of the input image, using it as a guiding point. It uses a parameter strength, which is similar to g I think, how strongly to follow the image.</li>
<li>New technique: Let's take an image and pass it into SD, then pass the resulting image into SD again! We can use this to change styles of images for example!</li>
<li>Fine-tuning: We take the models in the pipeline and pass it our own images and captions. Lambdalabs have a blog post guide for it.</li>
<li>Specical kind of fine-tuning: textual inversion. We find tune a single embedding. Create a new embedding for some concept images we want. E.g. 'watercolour', and add that token to the text model, and train embeddings for it using our images. Then we can have a prompt "Woman in the style of <watercolour>".&lt;/li&gt;
<li>Dreambooth is similar to textual inversion. It finds a existing token in the embeddings that is barely used, instead of making a new one, and fine tunes it. </li>
<li>Not sure why/if Textual inversion or Dreambooth is better.</li>
&lt;/ul&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Questions">Questions<a class="anchor-link" href="#Questions"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Links">Links<a class="anchor-link" href="#Links"> </a></h1><ul>
<li>As I am doing this lesson as it is released privately in real time, I cannot share the lesson link.</li>
</ul>

</div>
</div>
</div>
&lt;/div&gt;
 

</watercolour></li></ul></div></div></div></div>


  </div><a class="u-url" href="/Blogs/fast.ai2/2022/10/11/Lesson9Blog.md.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/Blogs/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/Blogs/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/Blogs/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>My personal website.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/fastai" target="_blank" title="fastai"><svg class="svg-icon grey"><use xlink:href="/Blogs/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/fastdotai" target="_blank" title="fastdotai"><svg class="svg-icon grey"><use xlink:href="/Blogs/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
